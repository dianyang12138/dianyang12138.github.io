<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="后端Java工程师"><title>docker笔记 | dian的博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">docker笔记</h1><a id="logo" href="/.">dian的博客</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">docker笔记</h1><div class="post-meta">2020-09-25</div><div class="post-content"><a id="more"></a>

<h2 id="一、安装Docker"><a href="#一、安装Docker" class="headerlink" title="一、安装Docker"></a>一、安装Docker</h2><h3 id="1-1安装"><a href="#1-1安装" class="headerlink" title="1.1安装"></a>1.1安装</h3><p>环境：centos 内核版(<code>uname -r</code>查看)：3.10以上</p>
<p><a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener">参考</a></p>
<ol>
<li><p>卸载旧版本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装需要的安装包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置镜像仓库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">国外的</span></span><br><span class="line">sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"><span class="meta">#</span><span class="bash">国内的</span></span><br><span class="line">sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装docker相关</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">更新yum索引，centos8不用fast</span></span><br><span class="line">sudo yum makecache fast</span><br><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io</span><br><span class="line"><span class="meta">#</span><span class="bash">核心 cli客户端 io容器</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ce表示社区版 ee表示企业版</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果不想安装最新版，可以使用<code>yum list docker-ce --showduplicates | sort -r</code>查看历史版本。然后使用<code>sudo yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io</code>指定版本安装</p>
</blockquote>
</li>
<li><p>启动测试</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br><span class="line">docker version#可以判断是否启动成功</span><br><span class="line">sudo docker run hello-world#测试引擎 如果有Hello from Docker就表示成功</span><br><span class="line">docker images#查看镜像</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置用户权限和开机自启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 如果还没有 docker group 就添加一个</span></span><br><span class="line">sudo groupadd docker</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将自己的登录名(<span class="variable">$&#123;USER&#125;</span> )加入该 group 内。然后退出并重新登录就生效啦</span></span><br><span class="line">sudo gpasswd -a $&#123;USER&#125; docker# sudo gpasswd -a vagrant docker</span><br><span class="line">sudo systemctl enable docker #开机自启动</span><br></pre></td></tr></table></figure>
</li>
<li><p>(如果)卸载docker</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove docker-ce docker-ce-cli containerd.io#卸载</span><br><span class="line">sudo rm -rf /var/lib/docker#删除资源 这是docker的默认工作路径</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="1-2配置阿里云镜像加速"><a href="#1-2配置阿里云镜像加速" class="headerlink" title="1.2配置阿里云镜像加速"></a>1.2配置阿里云镜像加速</h3><p>在<a href="https://homenew.console.aliyun.com/" target="_blank" rel="noopener">阿里云控制台</a>页面左侧产品与服务—&gt;弹性计算—&gt;<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/repositories" target="_blank" rel="noopener">容器镜像服务</a>—&gt;最左下镜像加速器。打开相应的操作文档</p>
<p>配置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">创建文件夹</span></span><br><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line"><span class="meta">#</span><span class="bash">创建daemon.json并输入相应内容</span></span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'</span><br><span class="line">&#123;</span><br><span class="line">  "registry-mirrors": ["https://dzwpjcek.mirror.aliyuncs.com"]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"><span class="meta">#</span><span class="bash">重启</span></span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<h3 id="1-3原理"><a href="#1-3原理" class="headerlink" title="1.3原理"></a>1.3原理</h3><p>运行流程：开始后，会在Docker在本机寻找镜像，判断是否有该镜像。有就运行，没有就去下载，然后去寻找是否找到相应镜像，没有就返回错误，有就下载并运行。</p>
<p>Docker是C-S结构。Docker的守护进程运行在主机上</p>
<p>DockerServer接收到Docker-Client指令，执行响应命令。</p>
<p>后台守护进程会创建容器。</p>
<h2 id="二、Docker常用命令"><a href="#二、Docker常用命令" class="headerlink" title="二、Docker常用命令"></a>二、Docker常用命令</h2><h3 id="2-1帮助命令"><a href="#2-1帮助命令" class="headerlink" title="2.1帮助命令"></a>2.1帮助命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker [命令] --help #查看帮助</span><br><span class="line">docker version #看版本</span><br><span class="line">docker info #</span><br></pre></td></tr></table></figure>

<p><a href="https://docs.docker.com/engine/reference/commandline/build/" target="_blank" rel="noopener">官方帮助文档</a></p>
<h3 id="2-2镜像命令"><a href="#2-2镜像命令" class="headerlink" title="2.2镜像命令"></a>2.2镜像命令</h3><h6 id="查看镜像"><a href="#查看镜像" class="headerlink" title="查看镜像"></a>查看镜像</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker images #查看镜像</span><br><span class="line"><span class="meta">#</span><span class="bash">显示结果。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">REPOSITORY 镜像的仓库源</span></span><br><span class="line"><span class="meta">#</span><span class="bash">TAG 镜像标签</span></span><br><span class="line"><span class="meta">#</span><span class="bash">IMAGE ID 镜像id</span></span><br><span class="line"><span class="meta">#</span><span class="bash">CREATED 镜像的创建时间</span></span><br><span class="line"><span class="meta">#</span><span class="bash">SIZE 镜像大小</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">常用可选项 </span></span><br><span class="line"><span class="meta">#</span><span class="bash">-a,--all 列出所有</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-q,--quiet 只显示镜像id</span></span><br></pre></td></tr></table></figure>

<h6 id="搜索镜像"><a href="#搜索镜像" class="headerlink" title="搜索镜像"></a>搜索镜像</h6><p>在<a href="https://hub.docker.com/" target="_blank" rel="noopener">官网</a>查看详细说明</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker search 要搜索内容</span><br><span class="line"><span class="meta">#</span><span class="bash">常用可选项</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --filter，-f 如--filter=STARS=3000 列出STARS大于3000的镜像</span></span><br></pre></td></tr></table></figure>

<h6 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull 镜像名#下载镜像，默认下最新版</span><br><span class="line">docker pull mysql:5.7#例指定版本</span><br></pre></td></tr></table></figure>

<p>指定版本必须官方库支持，在<code>Supported tags and respective Dockerfile links</code>内</p>
<blockquote>
<p>Docker下载镜像时分层下载。如果下次下载与以往有重叠，就可直接使用</p>
</blockquote>
<h6 id="删除镜像"><a href="#删除镜像" class="headerlink" title="删除镜像"></a>删除镜像</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f 镜像id#删除指定容器，多个用空格隔开</span><br><span class="line">docker rmi -f $(docker images -aq)#删除全部</span><br></pre></td></tr></table></figure>

<h3 id="2-3容器命令"><a href="#2-3容器命令" class="headerlink" title="2.3容器命令"></a>2.3容器命令</h3><p>有镜像才能创建容器</p>
<h6 id="新建容器并启动"><a href="#新建容器并启动" class="headerlink" title="新建容器并启动"></a>新建容器并启动</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">docker run [可选参数] 镜像名</span><br><span class="line"><span class="meta">#</span><span class="bash">可选参数</span></span><br><span class="line"><span class="meta">#</span><span class="bash">--name=<span class="string">"name"</span> 给容器取名，用来区分</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-d 后台运行</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-it 使用交互式方式运行，进入容器查看内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-p 指定容器的端口(不指定就是随机)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">	-p ip:主机端口:容器端口</span></span><br><span class="line"><span class="meta">#</span><span class="bash">	-p 主机端口:容器端口</span></span><br><span class="line"><span class="meta">#</span><span class="bash">	-p 容器端口</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 	容器端口</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --rm 用完即删除，一般用来测试</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --volumes-from 继承指定的容器装载卷(与他一致)，但被继承容器无了，依然存在(类似备份)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">例启动centos，并进入</span></span><br><span class="line"><span class="meta">#</span><span class="bash">镜像名后可以根命令，如ls -al</span></span><br><span class="line">docker run -it centos /bin/bash</span><br></pre></td></tr></table></figure>

<h6 id="查看运行容器"><a href="#查看运行容器" class="headerlink" title="查看运行容器"></a>查看运行容器</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker ps #列出当前正在运行的容器</span><br><span class="line"><span class="meta">#</span><span class="bash"> -a 再加上历史运行过容器</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -n=? 显示最近创建的容器 n=1表示一个</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -q 只显示容器编号</span></span><br></pre></td></tr></table></figure>

<h6 id="退出容器"><a href="#退出容器" class="headerlink" title="退出容器"></a>退出容器</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exit #停止并退出 如果是启动后再进入，使用并不会退出</span><br><span class="line">ctrl+P+Q #大写模式下用，容器不停止退出</span><br></pre></td></tr></table></figure>

<h6 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker rm 容器id #删除指定容器，不能删除正在运行容器</span><br><span class="line">docker rm -f $(docker ps -aq) #删除全部容器</span><br><span class="line">docker ps -a -q | xargs docker rm -f #删除所有容器</span><br></pre></td></tr></table></figure>

<h6 id="启动和停止容器"><a href="#启动和停止容器" class="headerlink" title="启动和停止容器"></a>启动和停止容器</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker start 容器id #启动容器</span><br><span class="line">docker restart 容器id #重启容器</span><br><span class="line">docker stop 容器id #停止正在运行容器</span><br><span class="line">dicjer kill 容器id #强制停止容器</span><br></pre></td></tr></table></figure>

<h3 id="2-4常用其它命令"><a href="#2-4常用其它命令" class="headerlink" title="2.4常用其它命令"></a>2.4常用其它命令</h3><h6 id="后台启动容器"><a href="#后台启动容器" class="headerlink" title="后台启动容器"></a>后台启动容器</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -d 容器名</span><br><span class="line"><span class="meta">#</span><span class="bash">常见问题：启动后，使用docker ps，发现停止了</span></span><br><span class="line"><span class="meta">#</span><span class="bash">容器后台运行必须有一个前台进程，docker如果发现没用应用就会自动停止</span></span><br><span class="line"><span class="meta">#</span><span class="bash">如nginx，tomcat等启动后，发现自己没提供服务，就会立刻停止</span></span><br></pre></td></tr></table></figure>

<h6 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker logs -tf 容器id#查看容器全部日志</span><br><span class="line">docker logs -tf --tail 10 容器id#查看最后10条日志</span><br></pre></td></tr></table></figure>

<h6 id="查看容器内进程"><a href="#查看容器内进程" class="headerlink" title="查看容器内进程"></a>查看容器内进程</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker top 容器id#显示容器内进程信息</span><br></pre></td></tr></table></figure>

<h6 id="查看镜像元数据"><a href="#查看镜像元数据" class="headerlink" title="查看镜像元数据"></a>查看镜像元数据</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect 容器id</span><br></pre></td></tr></table></figure>

<h6 id="进入正在运行容器"><a href="#进入正在运行容器" class="headerlink" title="进入正在运行容器"></a>进入正在运行容器</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it 容器id bashshell #进入时开启的是新终端</span><br><span class="line"><span class="meta">#</span><span class="bash">例 docker <span class="built_in">exec</span> -it deas45das4 /bin/bash</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker attach 容器id#进入容器，不会启动新进程</span><br></pre></td></tr></table></figure>

<h6 id="从容器内拷贝文件到主机"><a href="#从容器内拷贝文件到主机" class="headerlink" title="从容器内拷贝文件到主机"></a>从容器内拷贝文件到主机</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp 容器id:容器内路径 主机路径</span><br></pre></td></tr></table></figure>

<h6 id="提交镜像"><a href="#提交镜像" class="headerlink" title="提交镜像"></a>提交镜像</h6><p>将下载运行的镜像，通过修改。可以提交一个新的镜像。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker commit -m="提交的描述信息" -a="作者" 容器id 目标镜像名：[TAG] #tag可以是自己取得版本号</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">如</span></span><br><span class="line">docker commit -a="paidaxing" -m="add webapps app" 当前容器的id tomcat02:1.0</span><br></pre></td></tr></table></figure>

<h6 id="压缩解压"><a href="#压缩解压" class="headerlink" title="压缩解压"></a>压缩解压</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">可以将镜像压缩发给别人</span></span><br><span class="line">docker save --help</span><br><span class="line">docker load --help</span><br><span class="line"><span class="meta">#</span><span class="bash">自学</span></span><br></pre></td></tr></table></figure>



<h3 id="2-5简单例子"><a href="#2-5简单例子" class="headerlink" title="2.5简单例子"></a>2.5简单例子</h3><h6 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h6><ol>
<li>搜索镜像</li>
<li>下载镜像</li>
<li>运行<ul>
<li><code>docker run -d --name nginx1 -p 3344:80 nginx</code>：后台启动nginx命名nginx1，端口号80映射到主机的3344.</li>
</ul>
</li>
</ol>
<h6 id="安装ES-Kibana"><a href="#安装ES-Kibana" class="headerlink" title="安装ES+Kibana"></a>安装ES+Kibana</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name elasticsearch1 -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" elasticsearch:7.6.2</span><br><span class="line">curl localhost:9200#查看是否成功</span><br><span class="line">docker stats#查看容器所占性能</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">增加内存限制</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -d --name elasticsearch02 -p 9200:9200 -p 9300:9300 -e <span class="string">"discovery.type=single-node"</span> -e ES_JAVA_OPTS=<span class="string">"-Xms64m -Xmx512m"</span> elasticsearch:7.6.2</span></span><br></pre></td></tr></table></figure>

<h6 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在虚拟机中</span></span><br><span class="line">mkdir -p /mydata/redis/conf </span><br><span class="line">touch /mydata/redis/conf/redis.conf #先创建文件，否则挂载的时候会默认当成目录</span><br><span class="line"></span><br><span class="line">docker pull redis</span><br><span class="line"></span><br><span class="line">docker run -p 6379:6379 --name redis \</span><br><span class="line">-v /mydata/redis/data:/data \ </span><br><span class="line">-v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf \</span><br><span class="line">-d redis redis-server /etc/redis/redis.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">修改配置文件</span></span><br><span class="line">vim /mydata/redis/conf/redis.</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">写入内容</span></span><br><span class="line">appendonly yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">重启</span></span><br><span class="line">docker restart redis</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 直接进去redis客户端。测试持久化</span></span><br><span class="line">docker exec -it redis redis-cli</span><br><span class="line">set a b</span><br><span class="line">exit</span><br><span class="line">docker restart redis</span><br><span class="line">docker exec -it redis redis-cli</span><br><span class="line">get a</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">自启动</span></span><br><span class="line">sudo docker update 容器id --restart=always</span><br></pre></td></tr></table></figure>



<h3 id="2-6可视化"><a href="#2-6可视化" class="headerlink" title="2.6可视化"></a>2.6可视化</h3><h6 id="portainer-先用"><a href="#portainer-先用" class="headerlink" title="portainer(先用)"></a>portainer(先用)</h6><p>Docker的图形化界面管理工具，提供一个后台面板。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">-v将容器一些数据挂载到本机 --pri…授权访问  </span></span><br><span class="line">docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker --privileged=true portainer/portainer</span><br></pre></td></tr></table></figure>

<p>然后页面登录就行。</p>
<h6 id="Rancher-CI-CD"><a href="#Rancher-CI-CD" class="headerlink" title="Rancher(CI/CD)"></a>Rancher(CI/CD)</h6><h2 id="三、容器数据卷"><a href="#三、容器数据卷" class="headerlink" title="三、容器数据卷"></a>三、容器数据卷</h2><p>为了使得删除容器数据也不丢失，就要将数据存在本地。容器之间也是可以数据共享。</p>
<h6 id="启动挂载容器数据卷"><a href="#启动挂载容器数据卷" class="headerlink" title="启动挂载容器数据卷"></a>启动挂载容器数据卷</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v -p</span><br><span class="line"><span class="meta">#</span><span class="bash"> -it 交互式进入</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -v volume卷技术</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -p 主机端口</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">如 主机内地址:容器内地址</span></span><br><span class="line">docker run -it -v /home/ceshi:/home centos centos /bin/bash</span><br></pre></td></tr></table></figure>

<h6 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql:5.7</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 挂载</span></span><br><span class="line">docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql1 mysql:5.7</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-d 后台运行</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-p 端口映射</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-v 卷挂载</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-e 环境配置 MYSQL_ROOT_PASSWORD 配置MySQL密码</span></span><br><span class="line"><span class="meta">#</span><span class="bash">--name 容器名字</span></span><br></pre></td></tr></table></figure>

<p>我的虚拟机linux用的：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 3306:3306 --name MyMysql \</span><br><span class="line">-v /mydata/mysql/conf:/etc/mysql \</span><br><span class="line">-v /mydata/mysql/log:/var/log/mysql \</span><br><span class="line">-v /mydata/mysql/data:/var/lib/mysql \</span><br><span class="line">-e MYSQL_ROOT_PASSWORD=000000 \</span><br><span class="line">-d mysql:5.7</span><br></pre></td></tr></table></figure>

<p>进入mysql</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker exec -it 31983e213c96  /bin/bash</span><br></pre></td></tr></table></figure>

<p>查看mysql文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis mysql</span><br></pre></td></tr></table></figure>

<p>修改配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /mydata/mysql/conf/my.conf </span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line">[mysqld]</span><br><span class="line">init_connect='SET collation_connection = utf8_unicode_ci'</span><br><span class="line">init_connect='SET NAMES utf8'</span><br><span class="line">character-set-server=utf8</span><br><span class="line">collation-server=utf8_unicode_ci</span><br><span class="line">skip-character-set-client-handshake</span><br><span class="line">skip-name-resolve</span><br><span class="line"></span><br><span class="line">保存(注意评论区该配置不对，不是collection而是collation)</span><br><span class="line"></span><br><span class="line">docker restart MyMysql</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">自启动</span></span><br><span class="line">sudo docker update MyMysql --restart=always</span><br></pre></td></tr></table></figure>



<h6 id="具名和匿名挂载"><a href="#具名和匿名挂载" class="headerlink" title="具名和匿名挂载"></a>具名和匿名挂载</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-v 容器内路径</span><br><span class="line"><span class="meta">#</span><span class="bash">-v只写容器内路径，没写容器外路径就是匿名挂载</span></span><br><span class="line">docker run -p --name nginx1 -v /etc/nginx nginx #没给地址取名，匿名挂载</span><br><span class="line"></span><br><span class="line">docker volume ls #查看所有volume</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 通过-v 卷名:容器内路径</span></span><br><span class="line"><span class="meta">#</span><span class="bash">卷毛是不以<span class="string">"/"</span>开头</span></span><br></pre></td></tr></table></figure>

<p>所有docker容器内的卷，在没指定目录情况下都在<code>/var/lib/docker/volumes/卷名/_data</code>下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-v 容器内路径 #匿名挂载</span><br><span class="line">-v 卷名:容器内路径 #具名挂载</span><br><span class="line">-v /宿主机路径:容器内路径 #指定路径挂载</span><br></pre></td></tr></table></figure>

<p>拓展：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ro：<span class="built_in">readonly</span> 只读 只能在容器外改变，容器内无法改变</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rw：readwrite 读写 默认</span></span><br><span class="line">docker run -p --name nginx1 -v juming:/etc/nginx:ro nginx</span><br><span class="line">docker run -p --name nginx1 -v juming:/etc/nginx:rw nginx</span><br></pre></td></tr></table></figure>

<p><strong>结论</strong>：容器之间配置信息的传递，数据卷容器的生命周期一直持续到没有容器使用为止。若使用<code>-v</code>持久化到本地，这时候 本地的数据是不会删除</p>
<h2 id="四、Dockerfile"><a href="#四、Dockerfile" class="headerlink" title="四、Dockerfile"></a>四、Dockerfile</h2><h3 id="4-1基础知识"><a href="#4-1基础知识" class="headerlink" title="4.1基础知识"></a>4.1基础知识</h3><p>dockerfile是用来构建docker镜像的文件！命令参数脚本</p>
<p>以文件的方式指定命令，创建新镜像。</p>
<ul>
<li>每个保留关键字(指令)都必须是大写字母</li>
<li>执行从上到下顺序执行</li>
<li><code>#</code>表示注释</li>
<li>每条指令都会创建提交一个新的镜像层</li>
</ul>
<p>dockerfile是面向开发的。发布项目，做镜像，需要编写dockerfile文件。</p>
<p>官方默认命名<code>Dockerfile</code>，如果不指定默认寻找该文件</p>
<h3 id="4-2简单使用"><a href="#4-2简单使用" class="headerlink" title="4.2简单使用"></a>4.2简单使用</h3><ol>
<li><p>创建dockerfile文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">创建一个dockerfile文件，名字随意</span></span><br><span class="line"><span class="meta">#</span><span class="bash">指令大写</span></span><br><span class="line"><span class="meta">#</span><span class="bash">每一个指令都会创建体检一个新的镜像层，并提交</span></span><br><span class="line">FROM centos #以centos做基础</span><br><span class="line"></span><br><span class="line">VOLUME ["volume1","volume2"] #匿名挂载卷</span><br><span class="line"></span><br><span class="line">CMD echo "---end---" #命令行打印</span><br><span class="line"></span><br><span class="line">CMD /bin/bash #使用bash控制台</span><br></pre></td></tr></table></figure>
</li>
<li><p>构建<code>docker build -f dockerfile文件的路径 -t 镜像 .</code></p>
</li>
<li><p>可以查看镜像，然后启动</p>
</li>
</ol>
<h3 id="4-3DockerFile指令"><a href="#4-3DockerFile指令" class="headerlink" title="4.3DockerFile指令"></a>4.3DockerFile指令</h3><ul>
<li><p>构建时命令</p>
<ul>
<li><code>FROM</code>：基础镜像，从这里开始构建</li>
<li><code>MAINTAINER</code>：作者 姓名+邮箱</li>
<li><code>COPY</code>：类似ADD，将文件拷贝到镜像</li>
<li><code>ADD</code>：添加压缩包，会自动解压</li>
<li><code>RUN</code>：镜像构建时要运行的命令</li>
<li><code>ONBUILD</code>：当构建一个被继承DockerFile时会运行ONBUILD指令</li>
<li><code>.dockerignor</code></li>
</ul>
</li>
<li><p>连接工作目录命令</p>
<ul>
<li><code>WORKDIR</code>：设置镜像工作目录</li>
<li><code>USER</code></li>
</ul>
</li>
<li><p>启动时执行命令</p>
<ul>
<li><code>CMD</code>：指定容器启动时运行命令，只有最后一个会失效可被替代<ul>
<li><code>CMD [&quot;ls&quot;,&quot;-a]</code>：带参数有”[]”</li>
</ul>
</li>
<li><code>ENV</code>：构建时设置环境变量</li>
<li><code>EXPOSE</code>：指定对外端口</li>
<li><code>VOLUME</code>：挂载卷，挂载主机目录</li>
<li><code>ENTRYPOINT</code>：和CMD类似，可以追加命令</li>
</ul>
</li>
</ul>
<p><code>ENTRYPOINT</code>：运行时后加命令或参数，会追加到后面</p>
<p><code>CMD</code>：运行时加命令或参数，会替代最后一条</p>
<h3 id="4-4构建"><a href="#4-4构建" class="headerlink" title="4.4构建"></a>4.4构建</h3><p>找官方dockerfile学习。在Docker Hub内搜索任意镜像，找到<strong>Supported tags and respective Dockerfile links</strong>下任意一个版本点击就会跳转到dockerfile文件。</p>
   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">centos7.7</span></span><br><span class="line">FROM scratch#最基础镜像</span><br><span class="line">ADD centos-7-x86_64-docker.tar.xz / #添加centos7</span><br><span class="line"></span><br><span class="line">LABEL \ #添加标签</span><br><span class="line">    org.label-schema.schema-version="1.0" \</span><br><span class="line">    org.label-schema.name="CentOS Base Image" \</span><br><span class="line">    org.label-schema.vendor="CentOS" \</span><br><span class="line">    org.label-schema.license="GPLv2" \</span><br><span class="line">    org.label-schema.build-date="20200809" \</span><br><span class="line">    org.opencontainers.image.title="CentOS Base Image" \</span><br><span class="line">    org.opencontainers.image.vendor="CentOS" \</span><br><span class="line">    org.opencontainers.image.licenses="GPL-2.0-only" \</span><br><span class="line">    org.opencontainers.image.created="2020-08-09 00:00:00+01:00"</span><br><span class="line"></span><br><span class="line">CMD ["/bin/bash"]</span><br></pre></td></tr></table></figure>

<ol>
<li><p>编写dockerfile文件</p>
</li>
<li><p>docker build构建镜像</p>
</li>
<li><p>docker run运行镜像</p>
</li>
<li><p>docker push发布镜像(DockerHub、阿里云镜像仓库等)</p>
</li>
</ol>
<h3 id="4-5实操"><a href="#4-5实操" class="headerlink" title="4.5实操"></a>4.5实操</h3><h6 id="centos"><a href="#centos" class="headerlink" title="centos"></a>centos</h6><p>配置有vim等命令的centos</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">dockerfile文件</span></span><br><span class="line">FROM centos</span><br><span class="line">MAINTAINER kuangshen&lt;dianyang12138@163.com&gt;#作者</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local #配置一个环境变量</span><br><span class="line">WORKDIR $MYPATH#工作目录 进去后的位置 默认根目录</span><br><span class="line"></span><br><span class="line">RUN yum -y install vim #安装vim</span><br><span class="line">RUN yum -y install net-tools </span><br><span class="line"></span><br><span class="line">EXPOSE 80#暴露端口</span><br><span class="line"></span><br><span class="line">CMD echo $MYPATH</span><br><span class="line">CMD echo "---end---"</span><br><span class="line">CMD /bin/bash</span><br></pre></td></tr></table></figure>

<p>构建：<code>docker build -f centos-dockerfile -t 生成的镜像名:版本号 .</code></p>
<p><strong>history</strong>：<code>docker history 镜像索引号</code>可以查看镜像如何生成的</p>
<h6 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h6><ol>
<li><p>准备jdk和tomcat的压缩包</p>
</li>
<li><p>编写dockerfile文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">FROM centos</span><br><span class="line">MAINTAINER 作者&lt;邮箱&gt;</span><br><span class="line"></span><br><span class="line">COPY readme.txt /usr/local/readme/txt #讲说明文本复制到对应路径下</span><br><span class="line"></span><br><span class="line">ADD jdk….tar.gz /usr/local/ #将jdk解压复制到对应路径下</span><br><span class="line">ADD apache-tomcat….tar.gz /usr/local #将tomcat解压复制到对应路径下</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">ENV JAVA_HOME /usr/local/jdk</span><br><span class="line">ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tool.jar</span><br><span class="line">ENV CATALINA_HOME /usr/local/apache</span><br><span class="line">ENV CATALINA_BASH /usr/local/apache</span><br><span class="line">ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME</span><br><span class="line"></span><br><span class="line">EXPOSE 8080</span><br><span class="line"></span><br><span class="line">CMD /usr/local/apache-tomcat/bin/startup.sh &amp;&amp; tail -F /usr/local/apache-tomcat/bin/logs/catalina.out</span><br></pre></td></tr></table></figure>
</li>
<li><p>构建<code>docker build -t diytomcat .</code></p>
</li>
<li><p>启动</p>
</li>
<li><p>测试</p>
</li>
<li><p>发布</p>
</li>
</ol>
<h2 id="五、发布镜像"><a href="#五、发布镜像" class="headerlink" title="五、发布镜像"></a>五、发布镜像</h2><h3 id="5-1DockerHub"><a href="#5-1DockerHub" class="headerlink" title="5.1DockerHub"></a>5.1DockerHub</h3><ol>
<li><p>在<a href="https://hub.docker.com/" target="_blank" rel="noopener">DockerHub</a>上注册</p>
</li>
<li><p>登录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker login --help #查看对应帮助</span><br><span class="line"><span class="meta">#</span><span class="bash"> -u 用户名</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -p 密码</span></span><br><span class="line">docker login -u 账号 #回车</span><br></pre></td></tr></table></figure>


</li>
</ol>
<ol start="3">
<li><p>提交镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push 镜像名</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="5-2阿里云镜像仓库"><a href="#5-2阿里云镜像仓库" class="headerlink" title="5.2阿里云镜像仓库"></a>5.2阿里云镜像仓库</h3><ol>
<li>登录阿里云</li>
<li>找到容器镜像服务</li>
<li>创建命名空间：右上角创建</li>
<li>创建容器镜像：代码源选本地仓库</li>
<li>点开仓库就能看到操作流程</li>
</ol>
</div><div class="tags"><a href="/tags/docker/"><i class="fa fa-tag"></i>docker</a></div><div class="post-nav"><a class="pre" href="/2020/09/25/manjaro%E9%85%8D%E7%BD%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">manjaro配置开发环境</a><a class="next" href="/2020/06/13/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://example.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Scala/" style="font-size: 15px;">Scala</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 15px;">并发</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/nosql/" style="font-size: 15px;">nosql</a> <a href="/tags/elasticsearch/" style="font-size: 15px;">elasticsearch</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 15px;">后端</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/scala/" style="font-size: 15px;">scala</a> <a href="/tags/Shell/" style="font-size: 15px;">Shell</a> <a href="/tags/Spark/" style="font-size: 15px;">Spark</a> <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="font-size: 15px;">大数据</a> <a href="/tags/SQL/" style="font-size: 15px;">SQL</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/springsecurity/" style="font-size: 15px;">springsecurity</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/wordpress/" style="font-size: 15px;">wordpress</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/marjora/" style="font-size: 15px;">marjora</a> <a href="/tags/virtualbox/" style="font-size: 15px;">virtualbox</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/bug/" style="font-size: 15px;">bug</a> <a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 15px;">服务器</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 15px;">算法</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">机器学习</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 15px;">博客</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 15px;">计算机基础</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 15px;">爬虫</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 15px;">设计模式</a> <a href="/tags/%E6%B5%81%E7%A8%8B/" style="font-size: 15px;">流程</a> <a href="/tags/%E5%BC%80%E5%8F%91/" style="font-size: 15px;">开发</a> <a href="/tags/Flink/" style="font-size: 15px;">Flink</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/JVM/" style="font-size: 15px;">JVM</a> <a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">并发编程</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 15px;">前端</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 15px;">数据结构</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/07/06/Redis/">Redis</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/05/24/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">Git笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/05/07/JVM/">JVM</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/27/%E7%88%AC%E8%99%AB/">爬虫</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/26/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/25/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/">计算机组成原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/25/Git%E7%AC%94%E8%AE%B0/">Git笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/25/manjaro%E9%85%8D%E7%BD%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">manjaro配置开发环境</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/25/docker%E7%AC%94%E8%AE%B0/">docker笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/13/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">dian的博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>